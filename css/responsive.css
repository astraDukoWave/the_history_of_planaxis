/* ============================================================================
   RESPONSIVE.CSS - Media Queries Mobile-First
   
   ¿POR QUÉ FUERA DE @layer?
   Los media queries están INTENCIONALMENTE fuera de las capas CSS para
   tener la MÁXIMA prioridad. Esto permite sobrescribir cualquier estilo
   de cualquier capa basado en el tamaño del viewport.
   
   ENFOQUE MOBILE-FIRST: Escribimos estilos base para móviles, luego
   usamos min-width para agregar complejidad en pantallas más grandes.
   Esto resulta en CSS más eficiente y una mejor experiencia móvil.
   
   PROPIEDADES LÓGICAS: Usamos propiedades como margin-inline, padding-block
   en lugar de margin-left, padding-top. Esto hace el CSS agnóstico a la
   dirección del texto (LTR/RTL), mejorando la internacionalización.
   ============================================================================ */

/* ============================================================================
   ESTILOS MÓVIL (< 768px)
   
   Estos son los estilos BASE que aplican por defecto. Las media queries
   con min-width agregan/sobrescriben para pantallas más grandes.
   ============================================================================ */

/* Sidebar oculto por defecto en móvil */
.utility-sidebar {
  transform: translateX(100%) translateY(-50%);
  opacity: 0;
  pointer-events: none;
}

/* Toggle de sidebar visible en móvil */
.sidebar-toggle {
  display: flex;
}

/* ========================================================================
   SIDEBAR EXPANDIDO EN MÓVIL
   
   ¿POR QUÉ width: 260px?
   ======================
   Cuando el usuario hace clic en el botón toggle, el sidebar se expande
   para mostrar TANTO los íconos como el texto de los enlaces. Sin este
   ancho explícito, el sidebar mantendría su ancho base de 60px y el
   texto estaría oculto por overflow: hidden.
   
   ¿POR QUÉ background más opaco?
   ==============================
   En móvil, el sidebar necesita ser más legible porque no hay hover
   para revelar contenido. Usamos 95% de opacidad para máximo contraste.
   
   ACCESIBILIDAD: El z-index alto (1001) asegura que el sidebar esté
   SOBRE cualquier otro contenido flotante, incluyendo el header fijo.
   ======================================================================== */
.utility-sidebar.show {
  transform: translateX(0) translateY(-50%);
  opacity: 1;
  pointer-events: auto;
  
  /* Ancho expandido para mostrar texto de enlaces */
  width: 260px;
  
  /* Fondo más opaco para legibilidad */
  background: rgba(5, 10, 20, 0.95);
  
  /* Z-index alto para estar sobre el header */
  z-index: 1001;
}

/* ========================================================================
   TEXTO VISIBLE EN SIDEBAR MÓVIL EXPANDIDO
   
   ¿POR QUÉ?
   En desktop, el texto se revela con hover via CSS. En móvil, no hay
   hover, así que cuando el sidebar está expandido (.show), el texto
   DEBE ser visible inmediatamente.
   ======================================================================== */
.utility-sidebar.show .sidebar-links li a span:not(.icon),
.utility-sidebar.show .nav-text {
  opacity: 1;
}

/* ============================================================================
   NAVEGACIÓN MÓVIL - Animación de Display con CSS Moderno
   
   ¿POR QUÉ transition-behavior: allow-discrete?
   =============================================
   Históricamente, CSS no podía animar la propiedad `display` porque es
   "discreta" (solo tiene valores como none, block, flex - no hay estados
   intermedios como 0.5). 
   
   La nueva propiedad `transition-behavior: allow-discrete` le dice al
   navegador: "Sí, quiero animar display. Mantenlo visible durante la
   transición de salida."
   
   ¿CÓMO FUNCIONA @starting-style?
   ===============================
   Define los valores INICIALES cuando un elemento aparece (display: none → block).
   Sin esto, el elemento aparecería de golpe porque no hay "estado previo".
   
   @starting-style es como decir: "Cuando este elemento aparezca por primera
   vez, empieza desde ESTOS valores y anima hacia los valores normales."
   
   ANALOGÍA FEYNMAN: Es como las instrucciones de una obra de teatro.
   @starting-style dice: "El actor entra desde bambalinas (opacity: 0)".
   Los estilos normales dicen: "Cuando esté en escena, opacity: 1".
   La transición es el actor caminando desde bambalinas al centro del escenario.
   ============================================================================ */
.nav-links {
  position: absolute;
  top: 100%;
  inset-inline: 0;
  
  flex-direction: column;
  
  background-color: rgba(10, 30, 60, 0.98);
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  padding: var(--space-md);
  gap: 0;
  
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.4);
  max-height: calc(100dvh - 80px);
  overflow-y: auto;
  
  /* Estado CERRADO por defecto */
  display: none;
  opacity: 0;
  transform: translateY(-20px);
  
  /* ========================================================================
     TRANSICIONES MODERNAS
     
     transition-behavior: allow-discrete permite animar `display`.
     Incluimos display en la lista de propiedades a animar.
     ======================================================================== */
  transition: 
    opacity var(--transition-normal) var(--easing-default),
    transform var(--transition-normal) var(--easing-default),
    display var(--transition-normal) var(--easing-default) allow-discrete;
}

/* ========================================================================
   ESTADO ABIERTO - Controlado por data-visible="true"
   
   Usamos data-attribute en lugar de .show porque:
   1. Es más semántico (describe el estado, no la acción)
   2. Conecta mejor con aria-expanded del botón
   3. Facilita queries en CSS y JS
   ======================================================================== */
.nav-links[data-visible="true"] {
  display: flex;
  opacity: 1;
  transform: translateY(0);
}

/* ========================================================================
   @starting-style - Valores Iniciales de Entrada
   
   Cuando el menú pasa de display: none → flex, estos son los valores
   DESDE los cuales se anima. Sin esto, aparecería de golpe.
   ======================================================================== */
@starting-style {
  .nav-links[data-visible="true"] {
    opacity: 0;
    transform: translateY(-20px);
  }
}

/* Fallback para navegadores sin soporte de allow-discrete */
@supports not (transition-behavior: allow-discrete) {
  .nav-links {
    display: flex;
    visibility: hidden;
    pointer-events: none;
  }
  
  .nav-links[data-visible="true"] {
    visibility: visible;
    pointer-events: auto;
  }
}

/* Enlaces de nav con bordes en móvil */
.nav-links li {
  border-block-end: 1px solid rgba(255, 255, 255, 0.1);
}

.nav-links li:last-child {
  border-block-end: none;
}

.nav-links li a {
  display: block;
  padding: var(--space-md) var(--space-sm);
  text-align: start;
}

/* Botón hamburguesa visible en móvil */
.mobile-menu-toggle {
  display: flex;
}

/* Hero más corto en móvil */
.hero {
  min-height: 90vh;
  min-height: 90dvh;
}

/* Tipografía ajustada para móvil */
.hero-title {
  font-size: var(--font-size-xl);
  letter-spacing: 0.03em;
}

.hero-tagline {
  font-size: var(--font-size-base);
}

.hero-cta {
  font-size: var(--font-size-base);
  padding: var(--space-sm) var(--space-lg);
}

/* Contenedor móvil - Mayor uso del espacio */
.container {
  width: 95%;
  padding-inline: var(--space-sm);
}

.container-fluid {
  padding-inline: var(--space-sm);
}


/* ============================================================================
   TABLET - 768px a 1023px
   ============================================================================ */
@media (min-width: 768px) {
  /* Hero a altura completa */
  .hero {
    min-height: 100vh;
    min-height: 100dvh;
  }

  /* Tipografía tablet */
  .hero-title {
    font-size: calc(var(--font-size-2xl) * 0.85);
    letter-spacing: 0.04em;
  }

  .hero-tagline {
    font-size: var(--font-size-md);
  }

  .hero-cta {
    font-size: var(--font-size-md);
    padding: var(--space-md) var(--space-xl);
  }

  /* Sidebar aún oculto en tablet (toggle necesario) */
  .utility-sidebar {
    width: 240px;
  }

  .sidebar-toggle {
    display: flex;
  }

  /* Contenedor tablet */
  .container {
    width: 90%;
    padding-inline: var(--space-md);
  }

  .container-fluid {
    padding-inline: var(--space-md);
  }
}


@media (min-width: 1024px) {
  /* Navegación horizontal en desktop */
  .nav-links,
  .nav-links[data-visible="false"],
  .nav-links[data-visible="true"] {
    position: static;
    flex-direction: row;

    display: flex;
    background-color: transparent;
    backdrop-filter: none;
    padding: 0;
    gap: var(--space-lg);

    transform: none;
    opacity: 1;
    pointer-events: auto;
    box-shadow: none;
  }

  .nav-links li {
    border-block-end: none;
  }

  .nav-links li a {
    padding: var(--space-2xs) var(--space-sm);
  }

  .mobile-menu-toggle {
    display: none;
  }
}

/* ============================================================================
   DESKTOP - 1024px y más
   ============================================================================ */
@media (min-width: 1024px) {
  /* Sidebar visible permanentemente */
  .utility-sidebar {
    transform: translateY(-50%);
    opacity: 1;
    pointer-events: auto;
    width: 60px;  /* Estado colapsado */
  }

  /* Toggle oculto en desktop */
  .sidebar-toggle {
    display: none;
  }

  /* Tipografía desktop completa */
  .hero-title {
    font-size: var(--font-size-2xl);
    letter-spacing: 0.05em;
  }

  /* Contenedor desktop */
  .container {
    width: 90%;
    max-width: 1100px;
    margin-inline: auto;
    padding-inline: var(--space-md);
  }

  /* Hero content más ancho */
  .hero-content {
    max-width: 850px;
  }
}


/* ============================================================================
   DESKTOP GRANDE - 1440px y más
   ============================================================================ */
@media (min-width: 1440px) {
  /* Tipografía más grande para pantallas amplias */
  .hero-title {
    font-size: calc(var(--font-size-2xl) * 1.2);
  }

  /* Contenedor más amplio */
  .container {
    max-width: 1250px;
  }

  .hero-content {
    max-width: 900px;
  }

  /* Sidebar hover más ancho */
  .utility-sidebar:hover {
    width: 280px;
  }
}


/* ============================================================================
   ACCESIBILIDAD - Movimiento Reducido
   
   ¿POR QUÉ? Algunos usuarios experimentan mareo con animaciones.
   prefers-reduced-motion detecta esta preferencia del sistema operativo
   y deshabilita animaciones para estos usuarios.
   ============================================================================ */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }

  .scroll-indicator {
    animation: none;
  }
}


/* ============================================================================
   ESTILOS DE IMPRESIÓN
   ============================================================================ */
@media print {
  /* Ocultar elementos interactivos */
  .main-header,
  .utility-sidebar,
  .sidebar-toggle,
  .hero-cta,
  .scroll-indicator {
    display: none !important;
  }

  /* Optimizar para papel */
  .hero {
    height: auto;
    min-height: 300px;
    page-break-inside: avoid;
    background-image: none !important;
  }

  body {
    background: white;
    color: black;
  }

  /* Enlaces visibles con URL */
  a[href]::after {
    content: " (" attr(href) ")";
    font-size: 0.875em;
    color: #666;
  }
}
